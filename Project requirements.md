# Требования и архитектурный план

## 1. Бизнес-логика и концепция

- Определить основные сценарии использования.
- Пользователь -> API -> BL -> БД -> Биллинг -> Ответ пользователю.

## 2. Пользовательский слой

Авторизация и аккаунт:

- Логин/пароль.
- Баланс.

## 3. Модели

- Каталог доступных моделей.
- Таблица задач: ID задачи -> ID модели -> входные данные -> выходные данные.
- Асинхронный обработчик предсказаний: очередь задач (Celery/RQ/Kafka).
- Логирование и мониторинг выполнения.

## 4. Биллинг

- Расчёт задач

  - Проверка баланса перед запуском.
  - Автоматическая блокировка/списание средств.

- Пополнение баланса

  - Mock-запросы.

- История транзакций

  - Прозрачность для пользователя.

## 5. API дизайн

- `/users` - `GET`, `POST`.
- `/auth` - регистрация/логин.
- `/models` - список моделей.
- `/predict` - отправка задачи на выполнение (`POST`).
  - `/predict/{uuid}` - статус/результат (`GET`).
- `/billing` - баланс, пополнение, история.

## 6. Архитектура данных

- Таблицы: `users`, `transactions`, `models`, `tasks`, `tariffs`.
- Индексация по ID и времени.

## 7. Слой бизнес-логики

- API - BL - DB.
- Реализация правил (тарифы, лимиты).
- Контроль очередей и асинхронных задач.

## 8. Пользовательский интерфейс

- Вход/регистрация.
- Отправка задачи на предсказание.
- Просмотр истории задач.
- Баланс: пополнение + транзакции (mock).
